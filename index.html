<!DOCTYPE html>
<html>
  <head>
    <title>Camera Photo Upload</title>
  </head>
  <body>
    <h1>Take a Photo and Send</h1>
    <input
      type="file"
      accept="image/*"
      capture="environment"
      id="cameraInput"
    />
    <button onclick="uploadImage()">Send to Device</button>

    <script>
      let photoFile;

      document
        .getElementById("cameraInput")
        .addEventListener("change", (event) => {
          photoFile = event.target.files[0];
        });

      function uploadImage() {
        if (!photoFile) {
          alert("Please take a photo first!");
          return;
        }

        const formData = new FormData();
        formData.append("photo", photoFile);

        fetch("http://172.16.10.188:5000/upload", {
          method: "POST",
          body: formData,
        })
          .then((response) => {
            if (!response.ok) throw new Error("Network response was not OK");
            return response.text();
          })
          .then((data) => alert("Photo sent successfully!"))
          .catch((error) => alert("Error sending photo: " + error));
      }
    </script>
  </body>
</html>

